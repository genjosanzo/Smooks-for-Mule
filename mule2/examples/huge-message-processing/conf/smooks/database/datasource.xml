<?xml version="1.0"?>
<smooks-resource-list xmlns="http://www.milyn.org/xsd/smooks-1.0.xsd">

    <!--
    	Configure the Datasource for the 'internal' database.
    	In this example we only read from this database to demonstrate
    	the data enriching in Smooks.
    -->
    <resource-config selector="$document">
	    <resource>org.milyn.db.DirectDataSource</resource>
	    <param name="datasource">InternalPartsDatabase</param>
	    <param name="driver">org.hsqldb.jdbcDriver</param>
	    <param name="url">jdbc:hsqldb:hsql://localhost:9992/milyn-hsql-9992</param>
	    <param name="username">sa</param>
	    <param name="password"></param>
	    <param name="autoCommit">false</param>
	</resource-config>

    <!--
    	Configure the Datasource for the 'external' database.
    	In this example we write to this database to demonstrate
    	the database routing in Smooks.
    -->
    <resource-config selector="$document">
	    <resource>org.milyn.db.DirectDataSource</resource>
	    <param name="datasource">ExternalDatabase</param>
	    <param name="driver">org.hsqldb.jdbcDriver</param>
	    <param name="url">jdbc:hsqldb:hsql://localhost:9992/milyn-hsql-9992</param>
	    <param name="username">sa</param>
	    <param name="password"></param>
	    <param name="autoCommit">false</param>
	</resource-config>


	<!--
		The following two resource configs are only there for this example. They empty the tables so
		that multiple messages don't cause any exceptions
	-->
	<resource-config selector="$document">
		<resource>org.milyn.routing.db.SQLExecutor</resource>
		<param name="executeBefore">true</param>
		<param name="datasource">ExternalDatabase</param>
		<param name="statement">delete from EXT_PRODUCT</param>
	</resource-config>

	<resource-config selector="$document">
		<resource>org.milyn.routing.db.SQLExecutor</resource>
		<param name="executeBefore">true</param>
		<param name="datasource">ExternalDatabase</param>
		<param name="statement">delete from EXT_PART</param>
	</resource-config>

</smooks-resource-list>
