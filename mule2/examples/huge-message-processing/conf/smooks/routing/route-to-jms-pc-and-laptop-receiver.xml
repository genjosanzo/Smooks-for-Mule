<?xml version="1.0"?>
<smooks-resource-list xmlns="http://www.milyn.org/xsd/smooks-1.0.xsd">

	<resource-config selector="product">
		<resource>org.milyn.smooks.mule.MuleDispatcher</resource>
		<condition evaluator="org.milyn.javabean.expression.BeanMapExpressionEvaluator">
			 <!--  product.category == "Complete Systems" || product.category == "Laptops" -->
		</condition>
		<param name="endpointName">ReceivePCsAndLaptopsEndpoint</param>
		<param name="beanId">JSON_ReceivePCsAndLaptops</param>
	</resource-config>

	<resource-config selector="product">
		<resource type="ftl"><!--
			{
				"id" : ${product.id?c},
				"name" : "${product.name}",
				"brand" : "${product.brand}",
				"category" : <#if product.category == "Complete Systems">1<#else>2</#if>,
				"price" : ${product.price?c},
				"tax" : ${product.tax?c},
				"parts" : [
				<#list product.parts as part>
		        	${part.id?c}<#if part_has_next>,</#if>
		        </#list>
				]
			}
   		--></resource>
   		<condition evaluator="org.milyn.javabean.expression.BeanMapExpressionEvaluator">
			<!-- (product.category == "Complete Systems" || product.category == "Laptops")  -->
		</condition>
		<param name="action">bindto</param>
		<param name="bindId">JSON_ReceivePCsAndLaptops</param>
	</resource-config>

</smooks-resource-list>
